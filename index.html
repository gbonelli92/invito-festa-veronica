<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Welcome 30 – Invito</title>
  <style>
    :root{
      --nero:#0c0c0c; 
      --fucsia:#ef5aa6; 
      --fucsia-scuro:#db348c; 
      --bianco:#fff; 
      --grigio:#cfcfcf;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;background:var(--nero);color:var(--bianco)}

    main{scroll-snap-type:y mandatory; height:100dvh; overflow-y:auto;}
    section{min-height:100dvh; display:flex; align-items:flex-start;}

    .wrap{width:min(92%,760px); margin:40px auto 0;}

    .s1{background:var(--nero);position: relative; overflow: hidden;}
    .card{border-radius:20px; padding:28px; box-shadow:0 10px 30px rgba(0,0,0,.35);}
    .card-black{border-radius:20px; padding:0px 28px; box-shadow:0 10px 30px rgba(255,255,255,.35);}
    .title-rip{font-weight:900; letter-spacing:2px; font-size:clamp(38px,9vw,64px); text-align:center;}
    .sub{opacity:.9; text-align:center; font-size:clamp(16px,3.8vw,22px)}
    .pill{display:inline-block; padding:.35rem .7rem; border:1.5px solid #fff3; border-radius:999px; font-weight:600; margin:.15rem .25rem}
    ul{padding-left:1rem;}
    li{margin:.55rem 0; line-height:1.5}

    .s2{background:linear-gradient(180deg,var(--fucsia) 0%,var(--fucsia-scuro) 100%); color:#fff; position:relative; z-index:0;}
    .s3{background:linear-gradient(180deg,var(--fucsia-scuro) 0%,var(--fucsia-scuro) 100%); color:#fff; position:relative; z-index:0;}

    .s2 .card{border-color:#ffffff33}
    .title-welcome{font-weight:900; letter-spacing:1px; font-size:clamp(36px,9vw,64px); text-align:center;}
    .big30{font-weight:1000; font-size:clamp(72px,18vw,140px); line-height:1; text-shadow:0 10px 30px rgba(0,0,0,.2);} 
    .bigWELCOME{font-weight:1000; font-size:clamp(55px,18vw,55px); line-height:1; text-shadow:0 10px 30px rgba(0,0,0,.2);} 

    /* Arcobaleno animato + reveal contenuti (parte solo quando la sezione entra in viewport) */
    /* Stato iniziale: arcobaleno visibile ma fermo, contenuti nascosti */
    .rainbow { display:flex; justify-content:center; align-items:center; padding:28px 0 12px; overflow:hidden; }
    .rainbow svg { width:min(90%,560px); height:auto; display:block }
    .draw path{ stroke-dasharray:1200; stroke-dashoffset:1200; }

    .content-after-hero { opacity:0; }

    /* Quando la sezione .s2 è visibile e riceve .start-hero -> parte tutto */
    .s2.start-hero .draw path{ animation: drawArc 1.6s ease forwards; }
    .s2.start-hero .draw path:nth-child(2){ animation-delay:.15s }
    .s2.start-hero .draw path:nth-child(3){ animation-delay:.3s }
    .s2.start-hero .draw path:nth-child(4){ animation-delay:.45s }
    .s2.start-hero .draw path:nth-child(5){ animation-delay:.6s }

    /* L’arcobaleno svanisce/collassa dopo il disegno */
    .s2.start-hero .rainbow{ animation: fadeOutCollapse 1s ease forwards; animation-delay: 2s; }
    /* I contenuti appaiono subito dopo */
    .s2.start-hero .content-after-hero{ animation: fadeInUp .8s ease forwards; animation-delay: 5.1s; }

    @keyframes drawArc { to{ stroke-dashoffset:0 } }
    @keyframes fadeInUp { from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0); height:0; padding: 0} }
    @keyframes fadeOutCollapse {
      0% {opacity:1; transform:scale(1); height:auto; padding:28px 0 12px;}
      99% {opacity:0; transform:scale(0.95); height:auto; padding:28px 0 12px;}
      100% {opacity:0; transform:scale(0.95); height:0; padding:0;}
    }

    /* Effetto brillantini */
    .s2 > * { position: relative; z-index: 2; }
    .s2::before,
    .s2::after {
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      z-index:3;
      mix-blend-mode:screen;
    }
    /* Layer 1: puntini piccoli/medi */
    .s2::before{
      opacity:.25;
      background-image:
        radial-gradient(1.2px 1.2px at 10px 10px, #fff 70%, transparent 71%),
        radial-gradient(2px 2px   at 30px 25px, #fff 70%, transparent 71%),
        radial-gradient(3px 3px   at 50px 40px, #fff 70%, transparent 71%);
      background-size: 38px 38px, 70px 70px, 110px 110px;
      animation: twinkleSoft 3.6s ease-in-out infinite alternate;
    }
    /* Layer 2: puntini sfalsati + un po’ più grandi */
    .s2::after{
      opacity:.2;
      background-image:
        radial-gradient(1.4px 1.4px at 20px 35px, #fff 70%, transparent 71%),
        radial-gradient(2.4px 2.4px at 55px 15px, #fff 70%, transparent 71%),
        radial-gradient(3.2px 3.2px at 42px 50px, #fff 70%, transparent 71%);
      background-size: 44px 44px, 78px 78px, 128px 128px;
      animation: twinkleSoft 4.4s ease-in-out infinite alternate;
      animation-delay: .9s;
    }
    /* Fade in/out graduale (puntini che si accendono e spengono) */
    @keyframes twinkleSoft {
      0%   { opacity:.18; filter:brightness(1); }
      50%  { opacity:.9;  filter:brightness(1.35); }
      100% { opacity:.18; filter:brightness(1); }
    }

    .emoji{font-size:1.2em}

    .addcal{
      display:inline-block; padding:.55rem .9rem; border-radius:999px;
      background:#111; color:#fff; border:1px solid #ffffff33; text-decoration:none;
      font-weight:700; cursor:pointer;
    }
    .addcal:hover{ transform:translateY(-1px) }

    /* Link sulla data */
    .date-link{color:inherit; text-decoration:underline dotted;}
    .date-link:hover{opacity:.85}

    .cta{position:fixed; right:12px; bottom:12px; background:#111; color:#fff; border:2px solid #fff2; border-radius:999px; padding:.7rem 1rem; font-weight:700; text-decoration:none; box-shadow:0 8px 30px rgba(0,0,0,.35)}
    .cta:hover{transform:translateY(-1px)}

    .s1,.s2,.s3{scroll-snap-align:start}

    h2{margin:.2rem 0 1rem}
    p{margin:.6rem 0; text-align: center; font-size: 25px;}
    .divider{height:2px;background:#ffffff22;margin:18px 0;border-radius:999px}

    footer{padding:28px; text-align:center; font-size:14px; opacity:.7}
    .p-rosa{font-size: 23px;}

    /* Countdown */
    #countdown{font-size:clamp(32px,8vw,64px); font-weight:800; text-align:center; letter-spacing:1px;}

    .bat {
      position: absolute;
      font-size: 24px; /* base */
      opacity: 0.8;
      animation: flap 8s ease-in-out infinite alternate;
    }
    @keyframes flap {
      0%   { transform: translate(0,0) rotate(0deg); }
      25%  { transform: translate(15px,-20px) rotate(-15deg); }
      50%  { transform: translate(0,10px) rotate(10deg); }
      75%  { transform: translate(-20px,-15px) rotate(-5deg); }
      100% { transform: translate(10px,0) rotate(0deg); }
    }

    .timebox{
        display: flex;
        justify-content: center;
        gap: 45px;
    }

    .time{
        text-align: center;
    }

    .time h2{
        font-size: 5rem;
        font-weight: 100;
    }

    /* === HERO CIN-CIN === */
    .cheers-hero{
      position:relative;
      display:flex; justify-content:center; align-items:center;
      height:140px; opacity:0;
      pointer-events:none;
    }
    .glass{
      display:inline-block;
      font-size:clamp(42px,10vw,76px);
      line-height:1;
      transform-origin:50% 100%;
    }
    .glass.left{  transform: translateX(-48px) rotate(-12deg); }
    .glass.right{ transform: translateX( 48px) rotate( 12deg); }

    /* Entrata/uscita del blocco (si aggancia alla timeline dello start-hero) */
    .s2.start-hero .cheers-hero{
      animation: cheersShow .4s ease forwards 3s, cheersExit .6s ease forwards 4.4s;
    }
    /* Avvicinamento/tintinnio */
    .s2.start-hero .glass.left{  animation: clinkL .9s ease-out forwards 3.1s; }
    .s2.start-hero .glass.right{ animation: clinkR .9s ease-out forwards 3.1s; }

    @keyframes clinkL{
      0%{transform: translateX(-48px) rotate(-12deg);}
      60%{transform: translateX(-6px)  rotate(8deg);}
      70%{transform: translateX(-10px) rotate(4deg);}
      100%{transform: translateX(-6px)  rotate(8deg);}
    }
    @keyframes clinkR{
      0%{transform: translateX(48px) rotate(12deg);}
      60%{transform: translateX(6px)  rotate(-8deg);}
      70%{transform: translateX(10px) rotate(-4deg);}
      100%{transform: translateX(6px)  rotate(-8deg);}
    }
    @keyframes cheersShow{ from{opacity:0} to{opacity:1} }
    @keyframes cheersExit{ to{ opacity:0; transform: translateY(-24px) scale(.97); height:0} }


  </style>
</head>
<body>
<main>
  <section class="s1">
    <!-- Pipistrelli -->
    <span class="bat" style="top:10%; left:15%; font-size:30px; animation-duration:12s; animation-delay:0s;">🦇</span>
    <span class="bat" style="top:25%; left:60%; font-size:38px; animation-duration:15s; animation-delay:0s;">🦇</span>
    <span class="bat" style="top:45%; left:35%; font-size:32px; animation-duration:18s; animation-delay:0s;">🦇</span>
    <span class="bat" style="top:65%; left:75%; font-size:36px; animation-duration:14s; animation-delay:0s;">🦇</span>
    <span class="bat" style="top:80%; left:50%; font-size:28px; animation-duration:20s; animation-delay:0s;">🦇</span>

    <div class="wrap">
      <div>
        <div class="title-rip"><span class="big30">RIP</span></div>
        <div class="title-rip"><span class="big30">🪦 20 🪦</span></div>
        <p class="sub">(1995–2025)</p>
        <div class="divider"></div>
        <p>Ebbene sì, i miei 20 anni sono ufficialmente defunti…</p>
        <p>Pensavo che questo giorno non arrivasse mai, ma alla fine mi sono dovuta arrendere 💀</p>
        <p><strong>Il caso</strong> ha voluto che capitasse proprio nel giorno più fortunato dell’anno…</p>
        <p>Ma, come sapete, alla sfiga ormai ci sono abituata: <strong>quindi brindiamo lo stesso!</strong> 🥂😎</p>
        <p><img src="shit.png" style="width: auto; height: 300px;" /></p>
      </div>
    </div>
  </section>

  <section class="s2">
    <div class="wrap">
      <div>
        <!-- Arcobaleno animato -->
        <div class="rainbow">
          <svg viewBox="0 0 600 220" fill="none" xmlns="http://www.w3.org/2000/svg" class="draw">
            <!-- Archi dal più esterno al più interno -->
            <path d="M50 200 A250 250 0 0 1 550 200" stroke="#FF3B3B" stroke-width="18" stroke-linecap="round"/>
            <path d="M80 200 A220 220 0 0 1 520 200" stroke="#FF8A00" stroke-width="16" stroke-linecap="round"/>
            <path d="M110 200 A190 190 0 0 1 490 200" stroke="#FFD400" stroke-width="14" stroke-linecap="round"/>
            <path d="M140 200 A160 160 0 0 1 460 200" stroke="#31D157" stroke-width="12" stroke-linecap="round"/>
            <path d="M170 200 A130 130 0 0 1 430 200" stroke="#3BA1FF" stroke-width="10" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="cheers-hero">
          <span class="glass left">🥂</span>
          <span class="glass right">🥂</span>
        </div>
        <!-- Contenuti rivelati dopo l'arcobaleno -->
        <div class="content-after-hero">
          <div class="title-rip"><span class="bigWELCOME">WELCOME</span></div>
          <div class="title-rip"><span class="big30">🥂 30 🥂</span></div>
          <p class="p-rosa">📅 <strong>
            <a id="dateLink" class="date-link" href="#" aria-label="Aggiungi evento al calendario" title="Aggiungi al calendario">
              Venerdì <strong>17/10/2025</strong> – ore <strong>20:00</strong>
            </a>
          </strong></p>
          <p class="p-rosa">📍 <strong><a href="https://maps.app.goo.gl/14WjydNG4hgKbW3h9" target="_blank" rel="noopener">Gialloimmaginavo</a></strong> (Via Alessandro Cialdi, 1)</p>
          
          <div class="divider"></div>
          <p class="p-rosa">🎁 Porta con te <strong>un accessorio anni ’90</strong> (più è trash o nostalgico, meglio è!).</p>
          <p class="p-rosa">Quello che mi conquisterà di più riceverà <strong>una sorpresa</strong> ✨</p>
          
          <div class="divider"></div>
          <p class="p-rosa">Preparatevi a celebrare il funerale dei miei vent’anni tra <strong>balli, karaoke, giochi</strong> e una <strong>sana dose di nostalgia</strong>!</p>
          <p style="font-weight:900;">🚫 VIETATO MANCARE 🚫</p>
        </div>
      </div>
    </div>
  </section>
  <section class="s3">
    <div class="wrap">
      <div>
        <div class="title-rip"><span class="bigWELCOME">Mancano</span></div>
        <div class="timebox">
            <div class="time">
                <h2 id="days">00</h2>
                <p>Giorni</p>
            </div>
        </div>  
        <div class="timebox">
            <div class="time">
                <h2 id="hours">00</h2>
                <p>Ore</p>
            </div>
            <div class="time">
                <h2 id="minutes">00</h2>
                <p>Minuti</p>
            </div>
            <div class="time">
                <h2 id="seconds">00</h2>
                <p>Secondi</p>
            </div>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>© 2025 – Invito 30 anni</footer>

<script>
function downloadICS(){
  const title = "Festa Veronica - Welcome 30";
  const location = "Via Alessandro Cialdi, 1 - Gialloimmaginavo";
  const description = "Porta un accessorio anni ’90. Il più bello vince una sorpresa. Balli, karaoke, giochi e sana nostalgia ✨";
  const dtStart = "20251017T200000";
  const dtEnd   = "20251018T010000";

  const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Invito30//IT
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${Date.now()}@invito30
DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").split(".")[0]}Z
DTSTART;TZID=Europe/Rome:${dtStart}
DTEND;TZID=Europe/Rome:${dtEnd}
SUMMARY:${title}
LOCATION:${location}
DESCRIPTION:${description}
END:VEVENT
END:VCALENDAR`;

  const blob = new Blob([ics], {type: "text/calendar;charset=utf-8"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "invito-30anni.ics";
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}
</script>
<script>
(function () {
  const ua = navigator.userAgent || navigator.vendor || window.opera;
  const isAndroid = /Android/i.test(ua);
  const isIOS = /iPhone|iPad|iPod/i.test(ua) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);

  const dateEl = document.getElementById('dateLink');
  if (!dateEl) return;

  const gcalUrl = "https://calendar.google.com/calendar/render?action=TEMPLATE&text=Welcome%2030%20%E2%80%93%20Festa%20di%20Compleanno&dates=20251017T200000/20251017T233000&ctz=Europe/Rome&location=Gialloimmaginavo%2C%20Via%20Alessandro%20Cialdi%2C%201&details=Porta%20un%20accessorio%20anni%20%E2%80%9990.%20Il%20pi%C3%B9%20bello%20vince%20una%20sorpresa.%20Balli%2C%20karaoke%2C%20giochi%20e%20sana%20nostalgia%20%E2%9C%A8";

  if (isAndroid) {
    dateEl.href = gcalUrl;
    dateEl.target = "_blank";
    dateEl.rel = "noopener";
  } else {
    dateEl.addEventListener('click', function (e) { e.preventDefault(); downloadICS(); });
    dateEl.href = "#ics";
  }
})();
</script>
<script>
// Countdown per la data della festa (17 ottobre 2025, ore 20:00)
(function(){
    const Days = document.getElementById('days');
    const Hours = document.getElementById('hours');
    const Minutes = document.getElementById('minutes');
    const Seconds = document.getElementById('seconds');

  const targetDate = new Date("2025-10-17T20:00:00+02:00").getTime();

    function timer () {
        const currentDate = new Date().getTime();
        const distance = targetDate - currentDate;

        const days = Math.floor(distance / 1000 / 60 / 60 / 24);
        const hours = Math.floor(distance / 1000 / 60 / 60) % 24;
        const minutes = Math.floor(distance / 1000 / 60) % 60;
        const seconds = Math.floor(distance / 1000) % 60;

        Days.innerHTML = days;
        Hours.innerHTML = hours;
        Minutes.innerHTML = minutes;
        Seconds.innerHTML = seconds;

        if(distance < 0){
            Days.innerHTML = "00";
            Hours.innerHTML = "00";
            Minutes.innerHTML = "00";
            Seconds.innerHTML = "00";
        }
    }

    setInterval(timer, 1000);
  })();
</script>
<script>
/* Avvia l'animazione dell'arcobaleno SOLO quando la sezione rosa entra in viewport */
(function(){
  const rainbow = document.querySelector('.s2 .rainbow');
  if(!rainbow) return;
  const section = rainbow.closest('.s2');
  let started = false;
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting && !started){
        started = true;
        section.classList.add('start-hero');
        io.disconnect();
      }
    });
  }, { threshold: 0.4 });
  io.observe(section);
})();
</script>
</body>
</html>
